-
  Validate donation1
-
  !function {model: donation.donation, name: validate}:
    - eval: "[obj(ref('donation1')).id]"
-
  Donation1 Check that an account move has been generated
-
  !assert {model: donation.donation, id: donation1, string: Donation1 was not correctly validated}:
    - state == 'done'
    - move_id.date == time.strftime('%Y-%m-01')
    - move_id.journal_id.id == ref('account.check_journal')
    - move_id.state == 'posted'
    - move_id.ref == 'CHQ BNP 239023'
-
  Validate donation2
-
  !function {model: donation.donation, name: validate}:
    - eval: "[obj(ref('donation2')).id]"
-
  Donation2 Check that an account move has been generated
-
  !assert {model: donation.donation, id: donation2, string: Donation2 was not correctly validated}:
    - state == 'done'
    - move_id.date == time.strftime('%Y-%m-01')
    - move_id.journal_id.id == ref('account.cash_journal')
    - move_id.state == 'posted'
-
  Validate donation3
-
  !function {model: donation.donation, name: validate}:
    - eval: "[obj(ref('donation3')).id]"
-
  Donation3 Check that an account move has been generated
-
  !assert {model: donation.donation, id: donation3, string: Donation3 was not correctly validated}:
    - state == 'done'
    - move_id.date == time.strftime('%Y-%m-01')
    - move_id.journal_id.id == ref('account.cash_journal')
    - move_id.state == 'posted'
